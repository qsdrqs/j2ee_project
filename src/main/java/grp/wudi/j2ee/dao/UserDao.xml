<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="grp.wudi.j2ee.dao.UserDao">
	<select id="findById" parameterType="int"
		resultType="grp.wudi.j2ee.entity.User">
		SELECT
		user_id,
		user_name,
		user_sex,
		user_account
		FROM
		user
		WHERE user_id = #{id}
	</select>
	<select id="findAll" resultType="grp.wudi.j2ee.entity.User">
		SELECT * FROM user
	</select>
	
	<select id="findByKeyword" resultType="grp.wudi.j2ee.entity.User">
		SELECT
		user_id,
		user_name,
		user_sex,
		user_account
		FROM
		user
		WHERE 
		<if test="userId != 0">
			user_id LIKE '%${userId}%'
		</if>
		<if test="userName != null">
			AND user_name = '%${userName}%'
		</if>
		<if test="userAccount != null">
			AND user_account = '%${userAccount}%'
		</if>
	</select>
	
	<insert id="addUser" keyProperty="userId" useGeneratedKeys="true"
		parameterType="grp.wudi.j2ee.entity.User">
		INSERT INTO 
		user(user_name,user_sex,user_account,user_passwordsha256,user_mail,user_telephone,user_updatetime,user_createtime)
		VALUES
		(#{userName},#{userSex},#{userAccount},#{userPasswordsha256},#{userMail},#{userTelephone},#{userUpdatetime},#{userCreatetime})
	</insert>
	
	<update id="update"
		parameterType="grp.wudi.j2ee.entity.User">
		UPDATE user
		SET 
		user_name=#{userName}, 
		user_sex=#{userSex},
		user_account = #{userAccount},
		user_passwordsha256 = #{userPasswordsha256},
		user_mail = #{userMail},
		user_telephone = #{userTelephone},
		user_updatetime = #{userUpdatetime}
		WHERE user_id = #{userId}
	</update>
	
	<delete id="removeUser" parameterType="int">
		DELETE FROM user
		WHERE user_id = #{id}
	</delete>
</mapper>